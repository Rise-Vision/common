var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(t){"use strict";function e(){for(var t=null,e=[],l=[],f=[],s=0;s<E.length;s++)E[s].fontStyle.font.type&&"google"===E[s].fontStyle.font.type&&(t=E[s].fontStyle.font.family.split(","),e.push(t[0]));for(s=0;s<E.length;s++)E[s].fontStyle.font.type&&"custom"===E[s].fontStyle.font.type&&(l.push(E[s].fontStyle.font.family),f.push(E[s].fontStyle.font.url));l.length>0?n(l,f,function(){e.length>0?o(e,i):i()}):e.length>0?o(e,i):i()}function n(t,e,n){WebFont.load({custom:{families:t,urls:e},active:function(){n()},inactive:function(){n()},timeout:2e3})}function o(t,e){WebFont.load({google:{families:t},active:function(){e()},inactive:function(){e()},timeout:2e3})}function i(){l(),TweenLite.ticker.addEventListener("tick",c),b.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function l(){f(),u(),x.width=R,f(),u()}function f(){R=0;for(var t=0;t<E.length;t++)s(E[t])}function s(t){var e,n={};t&&(n.text=k.unescapeHTML(t.text)+" ",t.fontStyle&&(e=t.fontStyle,e.font&&e.font.family&&(n.font=e.font.family),e.size&&(n.size=e.size),e.forecolor&&(n.foreColor=e.forecolor),e.bold&&(n.bold=e.bold),e.italic&&(n.italic=e.italic)),a(n))}function a(t){var e="";C.save(),t.bold&&(e="bold "),t.italic&&(e+="italic "),t.size&&(e+=t.size+" "),t.font&&(e+=t.font),C.font=e,C.fillStyle=t.foreColor,C.translate(0,x.height/2),C.fillText(t.text,R,0),R+=C.measureText(t.text).width,C.restore()}function c(){w.clearRect(0,0,b.width,b.height),w.drawImage(x,w.xpos,0)}function u(){var t=0,e=0;if(V=R,E.length>0)for(;t<b.width;)s(E[e]),t=R-V,e=e===E.length-1?0:e+1}function r(){var e;if(t.transition&&t.transition.speed)switch(t.transition.speed){case"slow":e=100;break;case"medium":e=150;break;case"fast":e=200;break;default:e=150}return V/e}function d(){S=null,w.xpos=0,b.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function h(){x=document.createElement("canvas"),x.id="secondary",x.style.display="none",C=m(x),document.body.appendChild(x)}function m(e){var n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.xpos=0,n}function y(t){E=t,b=document.getElementById("scroller"),w=m(b),h(),e()}function p(t){E=t,l()}function v(){S||(S=TweenLite.to(w,r(),{xpos:-V,ease:Linear.easeNone,onComplete:d})),S.play()}function g(){S&&S.pause()}var b=null,w=null,x=null,C=null,S=null,E=[],R=0,V=0,k=RiseVision.Common.Utilities;return{init:y,play:v,pause:g,refresh:p}};