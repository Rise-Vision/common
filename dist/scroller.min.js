var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(t,e){"use strict";function n(){for(var t=null,e=[],n=[],s=[],f=0;f<S.length;f++)S[f].fontStyle.font.type&&"google"===S[f].fontStyle.font.type&&(t=S[f].fontStyle.font.family.split(","),e.push(t[0]));for(f=0;f<S.length;f++)S[f].fontStyle.font.type&&"custom"===S[f].fontStyle.font.type&&(n.push(S[f].fontStyle.font.family),s.push(S[f].fontStyle.font.url));n.length>0?o(n,s,function(){e.length>0?i(e,l):l()}):e.length>0?i(e,l):l()}function o(t,e,n){WebFont.load({custom:{families:t,urls:e},active:function(){n()},inactive:function(){n()},timeout:2e3})}function i(t,e){WebFont.load({google:{families:t},active:function(){e()},inactive:function(){e()},timeout:2e3})}function l(){s(),u(),w.width=E,s(),u(),TweenLite.ticker.addEventListener("tick",c),v.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function s(){E=0;for(var t=0;t<S.length;t++)f(S[t])}function f(t){var e,n={};t&&(n.text=V.unescapeHTML(t.text)+" ",t.fontStyle&&(e=t.fontStyle,e.font&&e.font.family&&(n.font=e.font.family),e.size&&(n.size=e.size),e.forecolor&&(n.foreColor=e.forecolor),e.bold&&(n.bold=e.bold),e.italic&&(n.italic=e.italic)),a(n))}function a(t){var e="";x.save(),t.bold&&(e="bold "),t.italic&&(e+="italic "),t.size&&(e+=t.size+" "),t.font&&(e+=t.font),x.font=e,x.fillStyle=t.foreColor,x.translate(0,w.height/2),x.fillText(t.text,E,0),E+=x.measureText(t.text).width,x.restore()}function c(){b.clearRect(0,0,v.width,v.height),b.drawImage(w,b.xpos,0)}function u(){var t=0,e=0;if(R=E,S.length>0)for(;t<v.width;)f(S[e]),t=E-R,e=e===S.length-1?0:e+1}function r(){var t;if(e.transition&&e.transition.speed)switch(e.transition.speed){case"slow":t=100;break;case"medium":t=150;break;case"fast":t=200;break;default:t=150}return R/t}function d(){C=null,b.xpos=0,v.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function m(){w=document.createElement("canvas"),w.id="secondary",w.style.display="none",x=h(w),document.body.appendChild(w)}function h(e){var n=e.getContext("2d");return e.width=t.getInt("rsW"),e.height=t.getInt("rsH"),n.xpos=0,n}function y(t){S=t,v=document.getElementById("scroller"),b=h(v),m(),n()}function p(){C||(C=TweenLite.to(b,r(),{xpos:-R,ease:Linear.easeNone,onComplete:d})),C.play()}function g(){C.pause()}var v=null,b=null,w=null,x=null,C=null,S=[],E=0,R=0,V=RiseVision.Common.Utilities;return{init:y,play:p,pause:g}};