var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(t){"use strict";function n(){for(var t=null,n=[],l=[],f=[],s=0;s<C.length;s++)C[s].fontStyle.font.type&&"google"===C[s].fontStyle.font.type&&(t=C[s].fontStyle.font.family.split(","),n.push(t[0]));for(s=0;s<C.length;s++)C[s].fontStyle.font.type&&"custom"===C[s].fontStyle.font.type&&(l.push(C[s].fontStyle.font.family),f.push(C[s].fontStyle.font.url));l.length>0?e(l,f,function(){n.length>0?o(n,i):i()}):n.length>0?o(n,i):i()}function e(t,n,e){WebFont.load({custom:{families:t,urls:n},active:function(){e()},inactive:function(){e()},timeout:2e3})}function o(t,n){WebFont.load({google:{families:t},active:function(){n()},inactive:function(){n()},timeout:2e3})}function i(){l(),c(),b.width=S,l(),c(),TweenLite.ticker.addEventListener("tick",u),g.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function l(){S=0;for(var t=0;t<C.length;t++)f(C[t])}function f(t){var n,e={};t&&(e.text=R.unescapeHTML(t.text)+" ",t.fontStyle&&(n=t.fontStyle,n.font&&n.font.family&&(e.font=n.font.family),n.size&&(e.size=n.size),n.forecolor&&(e.foreColor=n.forecolor),n.bold&&(e.bold=n.bold),n.italic&&(e.italic=n.italic)),s(e))}function s(t){var n="";w.save(),t.bold&&(n="bold "),t.italic&&(n+="italic "),t.size&&(n+=t.size+" "),t.font&&(n+=t.font),w.font=n,w.fillStyle=t.foreColor,w.translate(0,b.height/2),w.fillText(t.text,S,0),S+=w.measureText(t.text).width,w.restore()}function u(){v.clearRect(0,0,g.width,g.height),v.drawImage(b,v.xpos,0)}function c(){var t=0,n=0;if(E=S,C.length>0)for(;t<g.width;)f(C[n]),t=S-E,n=n===C.length-1?0:n+1}function a(){return E/g.width*10}function r(){x=null,v.xpos=0,g.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function d(){b=document.createElement("canvas"),b.id="secondary",b.style.display="none",w=m(b),document.body.appendChild(b)}function m(n){var e=n.getContext("2d");return n.width=t.getInt("rsW"),n.height=t.getInt("rsH"),e.xpos=0,e}function h(t){C=t,g=document.getElementById("scroller"),v=m(g),d(),n()}function y(){x||(x=TweenLite.to(v,a(),{xpos:-E,ease:Linear.easeNone,onComplete:r})),x.play()}function p(){x.pause()}var g=null,v=null,b=null,w=null,x=null,C=[],S=0,E=0,R=RiseVision.Common.Utilities;return{init:h,play:y,pause:p}};