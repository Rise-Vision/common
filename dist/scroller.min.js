var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(e){"use strict";function t(){w=0;for(var e=0;e<b.length;e++)x=e,b[e].separator?i(b[e],!0):o(b[e],!0)}function i(e,t){var i=v.height/2,n=e.size/2;m.save(),m.fillStyle=e.color,m.beginPath(),m.arc(w+n,i,n,0,2*Math.PI),m.fill();var o=e.size+10;if(w+=o,t){var r=0===x?0:g[x-1].end,s=r+o;g[x]={start:r,end:s,length:s-r}}m.restore()}function n(e){b[e].separator?i(b[e],!1):o(b[e],!1)}function o(e,t){var i,n={};e&&(n.text=C.unescapeHTML(e.text),e.fontStyle&&(i=e.fontStyle,i.font&&i.font.family&&(n.font=i.font.family),i.size&&(n.size=i.size),i.forecolor&&(n.foreColor=i.forecolor),i.bold&&(n.bold=i.bold),i.italic&&(n.italic=i.italic)),r(n,t))}function r(e,t){var i="";m.save(),e.bold&&(i="bold "),e.italic&&(i+="italic "),e.size&&(i+=e.size+" "),e.font&&(i+=e.font),m.font=i,m.fillStyle=e.foreColor,m.textBaseline="middle",m.translate(0,v.height/2),m.fillText(e.text,w,0);var n=m.measureText(e.text).width+10;if(w+=n,t){var o=0===x?0:g[x-1].end,r=o+n;g[x]={start:o,end:r,length:r-o}}m.restore()}function s(){if(y!==m.xpos){m.clearRect(0,0,v.width,v.height),w=m.xpos,y=w;for(var e=0;w<g[e].start&&e<g.length;)e++;for(w=g[e].start-w;w<v.width;)n(e),e++,e>=b.length&&(e=0)}}function a(){var t;if(e.transition&&e.transition.speed)switch(e.transition.speed){case"slow":t=100;break;case"medium":t=150;break;case"fast":t=200;break;default:t=150}return w/t}function l(){p=null,m.xpos=0,v.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function f(t){var i=t.getContext("2d");return t.width=e.width,t.height=e.height,i.xpos=0,i}function c(e){b=e,v=document.getElementById("scroller"),m=f(v),t(),TweenLite.ticker.addEventListener("tick",s),v.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function u(e){b=e,m.clear(),t()}function d(){p||(p=TweenLite.to(m,a(),{xpos:w,ease:Linear.easeNone,onComplete:l})),p.play(),m.clear()}function h(){p&&p.pause()}var v=null,m=null,p=null,b=[],g=[],x=0,w=0,y=0,C=RiseVision.Common.Utilities;return{init:c,play:d,pause:h,refresh:u}};