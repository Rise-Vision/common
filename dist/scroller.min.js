var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(e){"use strict";function t(){n(),TweenLite.ticker.addEventListener("tick",a),b.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function n(){i(),r(),w.width=z,i(),r()}function i(){z=0;for(var e=0;e<C.length;e++)C[e].separator?o(C[e]):l(C[e])}function o(e){var t=w.height/2,n=e.size/2;g.save(),g.fillStyle=e.color,g.beginPath(),g.arc(z+n,t,n,0,2*Math.PI),g.fill(),z+=e.size+10,g.restore()}function l(e){var t,n={};e&&(n.text=R.unescapeHTML(e.text),e.fontStyle&&(t=e.fontStyle,t.font&&t.font.family&&(n.font=t.font.family),t.size&&(n.size=t.size),t.forecolor&&(n.foreColor=t.forecolor),t.bold&&(n.bold=t.bold),t.italic&&(n.italic=t.italic)),s(n))}function s(e){var t="";g.save(),e.bold&&(t="bold "),e.italic&&(t+="italic "),e.size&&(t+=e.size+" "),e.font&&(t+=e.font),g.font=t,g.fillStyle=e.foreColor,g.textBaseline="middle",g.translate(0,w.height/2),g.fillText(e.text,z,0),z+=g.measureText(e.text).width+10,g.restore()}function a(){y.clearRect(0,0,b.width,b.height),y.drawImage(w,y.xpos,0)}function r(){var e=0,t=0;if(E=z,C.length>0)for(;e<b.width;)C[t].separator?o(C[t]):l(C[t]),e=z-E,t=t===C.length-1?0:t+1}function c(){var t;if(e.transition&&e.transition.speed)switch(e.transition.speed){case"slow":t=100;break;case"medium":t=150;break;case"fast":t=200;break;default:t=150}return E/t}function f(){x=null,y.xpos=0,b.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function u(){w=document.createElement("canvas"),w.id="secondary",w.style.display="none",g=d(w),document.body.appendChild(w)}function d(t){var n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.xpos=0,n}function h(e){C=e,b=document.getElementById("scroller"),y=d(b),u(),R.loadFonts(e,t)}function m(e){C=e,n()}function p(){x||(x=TweenLite.to(y,c(),{xpos:-E,ease:Linear.easeNone,onComplete:f})),x.play()}function v(){x&&x.pause()}var b=null,y=null,w=null,g=null,x=null,C=[],z=0,E=0,R=RiseVision.Common.Utilities;return{init:h,play:p,pause:v,refresh:m}};