!function(){function t(t){return t.call.apply(t.bind,arguments)}function e(t,e){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function i(){return i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:e,i.apply(null,arguments)}function n(t,e){this.a=t,this.o=e||t,this.c=this.o.document}function o(t,e,i,n){if(e=t.c.createElement(e),i)for(var o in i)i.hasOwnProperty(o)&&("style"==o?e.style.cssText=i[o]:e.setAttribute(o,i[o]));return n&&e.appendChild(t.c.createTextNode(n)),e}function s(t,e,i){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function r(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),o=0;o<e.length;o+=1){for(var s=!1,a=0;a<n.length;a+=1)if(e[o]===n[a]){s=!0;break}s||n.push(e[o])}for(e=[],o=0;o<n.length;o+=1){for(s=!1,a=0;a<i.length;a+=1)if(n[o]===i[a]){s=!0;break}s||e.push(n[o])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function l(t,e){for(var i=t.className.split(/\s+/),n=0,o=i.length;o>n;n++)if(i[n]==e)return!0;return!1}function c(t){return t.o.location.hostname||t.a.location.hostname}function u(t,e,i){function n(){c&&a&&r&&(c(l),c=null)}e=o(t,"link",{rel:"stylesheet",href:e,media:"all"});var a=!1,r=!0,l=null,c=i||null;ee?(e.onload=function(){a=!0,n()},e.onerror=function(){a=!0,l=Error("Stylesheet failed to load"),n()}):setTimeout(function(){a=!0,n()},0),s(t,"head",e)}function h(t,e,i,n){var s=t.c.getElementsByTagName("head")[0];if(s){var a=o(t,"script",{src:e}),r=!1;return a.onload=a.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i&&i(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&s.removeChild(a))},s.appendChild(a),setTimeout(function(){r||(r=!0,i&&i(Error("Script load timeout")))},n||5e3),a}return null}function f(){this.a=0,this.c=null}function d(t){return t.a++,function(){t.a--,g(t)}}function m(t,e){t.c=e,g(t)}function g(t){0==t.a&&t.c&&(t.c(),t.c=null)}function p(t){this.a=t||"-"}function v(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function y(t){return C(t)+" "+(t.f+"00")+" 300px "+w(t.c)}function w(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var n=t[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?e.push("'"+n+"'"):e.push(n)}return e.join(",")}function R(t){return t.a+t.f}function C(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function T(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function V(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new p("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function b(t){t.g&&r(t.f,[t.a.c("wf","loading")]),L(t,"loading")}function I(t){if(t.g){var e=l(t.f,t.a.c("wf","active")),i=[],n=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),r(t.f,i,n)}L(t,"inactive")}function L(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,R(i)):t.h[e]())}function O(){this.c={}}function _(t,e,i){var n,o=[];for(n in e)if(e.hasOwnProperty(n)){var s=t.c[n];s&&o.push(s(e[n],i))}return o}function k(t,e){this.c=t,this.f=e,this.a=o(this.c,"span",{"aria-hidden":"true"},this.f)}function E(t){s(t.c,"body",t.a)}function S(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(t.c)+";"+("font-style:"+C(t)+";font-weight:"+(t.f+"00")+";")}function D(t,e,i,n,o,s){this.g=t,this.j=e,this.a=n,this.c=i,this.f=o||3e3,this.h=s||void 0}function F(t,e,i,n,o,s,a){this.v=t,this.B=e,this.c=i,this.a=n,this.s=a||"BESbswy",this.f={},this.w=o||3e3,this.u=s||null,this.m=this.j=this.h=this.g=null,this.g=new k(this.c,this.s),this.h=new k(this.c,this.s),this.j=new k(this.c,this.s),this.m=new k(this.c,this.s),t=new v(this.a.c+",serif",R(this.a)),t=S(t),this.g.a.style.cssText=t,t=new v(this.a.c+",sans-serif",R(this.a)),t=S(t),this.h.a.style.cssText=t,t=new v("serif",R(this.a)),t=S(t),this.j.a.style.cssText=t,t=new v("sans-serif",R(this.a)),t=S(t),this.m.a.style.cssText=t,E(this.g),E(this.h),E(this.j),E(this.m)}function x(){if(null===ne){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);ne=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return ne}function N(t,e,i){for(var n in ie)if(ie.hasOwnProperty(n)&&e===t.f[ie[n]]&&i===t.f[ie[n]])return!0;return!1}function z(t){var e,i=t.g.a.offsetWidth,n=t.h.a.offsetWidth;(e=i===t.f.serif&&n===t.f["sans-serif"])||(e=x()&&N(t,i,n)),e?te()-t.A>=t.w?x()&&N(t,i,n)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?A(t,t.v):A(t,t.B):M(t):A(t,t.v)}function M(t){setTimeout(i(function(){z(this)},t),50)}function A(t,e){setTimeout(i(function(){a(this.g.a),a(this.h.a),a(this.j.a),a(this.m.a),e(this.a)},t),0)}function H(t,e,i){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=i}function j(t){0==--t.f&&t.j&&(t.m?(t=t.a,t.g&&r(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),L(t,"active")):I(t.a))}function U(t){this.j=t,this.a=new O,this.h=0,this.f=this.g=!0}function P(t,e,n,o,s){var a=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=s||null,l=o||null||{};if(0===n.length&&a)I(e.a);else{e.f+=n.length,a&&(e.j=a);var c,u=[];for(c=0;c<n.length;c++){var h=n[c],f=l[h.c],d=e.a,m=h;if(d.g&&r(d.f,[d.a.c("wf",m.c,R(m).toString(),"loading")]),L(d,"fontloading",m),d=null,null===oe)if(window.FontFace){var m=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);oe=m?42<parseInt(m[1],10):g?!1:!0}else oe=!1;d=oe?new D(i(e.g,e),i(e.h,e),e.c,h,e.s,f):new F(i(e.g,e),i(e.h,e),e.c,h,e.s,t,f),u.push(d)}for(c=0;c<u.length;c++)u[c].start()}},0)}function q(t,e,i){var n=[],o=i.timeout;b(e);var n=_(t.a,i,t.c),s=new H(t.c,e,o);for(t.h=n.length,e=0,i=n.length;i>e;e++)n[e].load(function(e,i,n){P(t,s,e,i,n)})}function G(t,e){this.c=t,this.a=e}function W(t,e){this.c=t,this.a=e}function B(t,e){this.c=t?t:se,this.a=[],this.f=[],this.g=e||""}function $(t,e){for(var i=e.length,n=0;i>n;n++){var o=e[n].split(":");3==o.length&&t.f.push(o.pop());var s="";2==o.length&&""!=o[1]&&(s=":"),t.a.push(o.join(s))}}function Q(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],n=0;e>n;n++)i.push(t.a[n].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function J(t){this.f=t,this.a=[],this.c={}}function K(t){for(var e=t.f.length,i=0;e>i;i++){var n=t.f[i].split(":"),o=n[0].replace(/\+/g," "),s=["n4"];if(2<=n.length){var a,r=n[1];if(a=[],r)for(var r=r.split(","),l=r.length,c=0;l>c;c++){var u;if(u=r[c],u.match(/^[\w-]+$/)){var h=ce.exec(u.toLowerCase());if(null==h)u="";else{if(u=h[2],u=null==u||""==u?"n":le[u],h=h[1],null==h||""==h)h="4";else var f=re[h],h=f?f:isNaN(h)?"4":h.substr(0,1);u=[u,h].join("")}}else u="";u&&a.push(u)}0<a.length&&(s=a),3==n.length&&(n=n[2],a=[],n=n?n.split(","):a,0<n.length&&(n=ae[n[0]])&&(t.c[o]=n))}for(t.c[o]||(n=ae[o])&&(t.c[o]=n),n=0;n<s.length;n+=1)t.a.push(new v(o,s[n]))}}function X(t,e){this.c=t,this.a=e}function Y(t,e){this.c=t,this.a=e}function Z(t,e){this.c=t,this.f=e,this.a=[]}var te=Date.now||function(){return+new Date},ee=!!window.FontFace;p.prototype.c=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},D.prototype.start=function(){var t=this.c.o.document,e=this,i=te(),n=new Promise(function(n,o){function s(){te()-i>=e.f?o():t.fonts.load(y(e.a),e.h).then(function(t){1<=t.length?n():setTimeout(s,25)},function(){o()})}s()}),o=null,s=new Promise(function(t,i){o=setTimeout(i,e.f)});Promise.race([s,n]).then(function(){o&&(clearTimeout(o),o=null),e.g(e.a)},function(){e.j(e.a)})};var ie={D:"serif",C:"sans-serif"},ne=null;F.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=te(),z(this)};var oe=null;H.prototype.g=function(t){var e=this.a;e.g&&r(e.f,[e.a.c("wf",t.c,R(t).toString(),"active")],[e.a.c("wf",t.c,R(t).toString(),"loading"),e.a.c("wf",t.c,R(t).toString(),"inactive")]),L(e,"fontactive",t),this.m=!0,j(this)},H.prototype.h=function(t){var e=this.a;if(e.g){var i=l(e.f,e.a.c("wf",t.c,R(t).toString(),"active")),n=[],o=[e.a.c("wf",t.c,R(t).toString(),"loading")];i||n.push(e.a.c("wf",t.c,R(t).toString(),"inactive")),r(e.f,n,o)}L(e,"fontinactive",t),j(this)},U.prototype.load=function(t){this.c=new n(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,q(this,new V(this.c,t),t)},G.prototype.load=function(t){function e(){if(s["__mti_fntLst"+n]){var i,o=s["__mti_fntLst"+n](),a=[];if(o)for(var r=0;r<o.length;r++){var l=o[r].fontfamily;void 0!=o[r].fontStyle&&void 0!=o[r].fontWeight?(i=o[r].fontStyle+o[r].fontWeight,a.push(new v(l,i))):a.push(new v(l))}t(a)}else setTimeout(function(){e()},50)}var i=this,n=i.a.projectId,o=i.a.version;if(n){var s=i.c.o;h(this.c,(i.a.api||"https://fast.fonts.net/jsapi")+"/"+n+".js"+(o?"?v="+o:""),function(o){o?t([]):(s["__MonotypeConfiguration__"+n]=function(){return i.a},e())}).id="__MonotypeAPIScript__"+n}else t([])},W.prototype.load=function(t){var e,i,n=this.a.urls||[],o=this.a.families||[],s=this.a.testStrings||{},a=new f;for(e=0,i=n.length;i>e;e++)u(this.c,n[e],d(a));var r=[];for(e=0,i=o.length;i>e;e++)if(n=o[e].split(":"),n[1])for(var l=n[1].split(","),c=0;c<l.length;c+=1)r.push(new v(n[0],l[c]));else r.push(new v(n[0]));m(a,function(){t(r,s)})};var se="https://fonts.googleapis.com/css",ae={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},re={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},le={i:"i",italic:"i",n:"n",normal:"n"},ce=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,ue={Arimo:!0,Cousine:!0,Tinos:!0};X.prototype.load=function(t){var e=new f,i=this.c,n=new B(this.a.api,this.a.text),o=this.a.families;$(n,o);var s=new J(o);K(s),u(i,Q(n),d(e)),m(e,function(){t(s.a,s.c,ue)})},Y.prototype.load=function(t){var e=this.a.id,i=this.c.o;e?h(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var n=[],o=0;o<e.length;o+=2)for(var s=e[o],a=e[o+1],r=0;r<a.length;r++)n.push(new v(s,a[r]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}t(n)}},2e3):t([])},Z.prototype.load=function(t){var e=this.f.id,i=this.c.o,n=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var o=0,s=i.fonts.length;s>o;++o){var a=i.fonts[o];n.a.push(new v(a.name,T("font-weight:"+a.weight+";font-style:"+a.style)))}t(n.a)},h(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+c(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var he=new U(window);he.a.c.custom=function(t,e){return new W(e,t)},he.a.c.fontdeck=function(t,e){return new Z(e,t)},he.a.c.monotype=function(t,e){return new G(e,t)},he.a.c.typekit=function(t,e){return new Y(e,t)},he.a.c.google=function(t,e){return new X(e,t)};var fe={load:i(he.load,he)};"function"==typeof define&&define.amd?define(function(){return fe}):"undefined"!=typeof module&&module.exports?module.exports=fe:(window.WebFont=fe,window.WebFontConfig&&he.load(window.WebFontConfig))}();var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function t(t,e){var i="font-family: "+decodeURIComponent(e.font.family).replace(/'/g,"")+"; ",n="color: "+(e.color?e.color:e.forecolor)+"; ",o="font-size: "+(-1===e.size.indexOf("px")?e.size+"px; ":e.size+"; "),s="font-weight: "+(e.bold?"bold":"normal")+"; ",a="font-style: "+(e.italic?"italic":"normal")+"; ",r="text-decoration: "+(e.underline?"underline":"none")+"; ",l="background-color: "+(e.highlightColor?e.highlightColor:e.backcolor)+";";return"."+t+" {"+i+n+o+s+a+r+l+"}"}function e(t){for(var e=document.createElement("style"),i=0,n=t.length;n>i;i++)e.appendChild(document.createTextNode(t[i]));document.head.appendChild(e)}function i(i,s){function a(){s&&"function"==typeof s&&s()}function r(){a()}var l=null,c=[],u=[],h=[];if(!i||0===i.length)return a(),void 0;i.forEach(function(i){i.class&&i.fontStyle&&e([t(i.class,i.fontStyle)])});for(var f=0;f<i.length;f++)i[f].fontStyle&&i[f].fontStyle.font.type&&"google"===i[f].fontStyle.font.type&&(l=i[f].fontStyle.font.family.split(",")[0],l=l.replace(/'/g,""),c.push(l));for(f=0;f<i.length;f++)i[f].fontStyle&&i[f].fontStyle.font.type&&"custom"===i[f].fontStyle.font.type&&(u.push(decodeURIComponent(i[f].fontStyle.font.family).replace(/'/g,"")),h.push(i[f].fontStyle.font.url.replace(/'/g,"\\'")));if(0===c.length&&0===u.length)a();else{for(var d=0;d<u.length;d+=1)n(u[d],h[d]);c.length>0?o(c,r):a()}}function n(t,e,i){var n=null,o="font-family: "+t+"; src: url('"+e+"');";i=i||document,n=i.styleSheets[0],null!==n&&n.addRule("@font-face",o)}function o(t,e){WebFont.load({google:{families:t},active:function(){e&&"function"==typeof e&&e()},inactive:function(){e&&"function"==typeof e&&e()},timeout:5e3})}function s(t){var e=document.createElement("script");e.src=t,document.body.appendChild(e)}function a(t){for(var e=t.length,i=[],n=0;e>n;n++)i[n]=new Image,i[n].src=t[n]}function r(t){return l(t,window.location.search.substring(1))}function l(t,e){for(var i,n=e.split("&"),o=0;o<n.length;o++)if(i=n[o].split("="),i[0]==t)return decodeURIComponent(i[1]);return""}function c(t){var e=/(\d{4})\.(\d{2})\.(\d{2})\.(\d{2})\.(\d{2})/,i=e.exec(t);return i?new Date(+i[1],+i[2]-1,+i[3],+i[4],+i[5]):void 0}function u(t){var e="";switch(t){case 404:e="The file does not exist or cannot be accessed.";break;case 507:e="There is not enough disk space to save the file on Rise Cache.";break;default:e="There was a problem retrieving the file from Rise Cache."}return e}function h(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent}function f(t,e){var i=new XMLHttpRequest;if(t&&e&&"function"==typeof e){i.open("HEAD",t+"?cb="+(new Date).getTime(),!1);try{i.send(),e(i.status>=200&&i.status<304)}catch(n){e(!1)}}}function d(){var t=25,e=navigator.userAgent.match(/Chrome\/(\S+)/),i=e?e[1]:0;return i&&(i=parseInt(i.substring(0,i.indexOf("."))),t>=i)?!0:!1}function m(t,e){return/^(?:f|ht)tps?\:\/\//.test(t)||(t=(e?"https://":"http://")+t),t}return{addProtocol:m,getQueryParameter:r,getQueryStringParameter:l,getFontCssStyle:t,addCSSRules:e,loadFonts:i,loadCustomFont:n,loadGoogleFonts:o,loadScript:s,preloadImages:a,getRiseCacheErrorMessage:u,unescapeHTML:h,hasInternetConnection:f,isLegacy:d,getDateObjectFromPlayerVersionString:c}}();var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},CollectionTimes=function(){function t(){function t(i,n){var o,s=6e4,a=new RiseVision.Common.Visualization,r=setTimeout(function(){t(i,n)},s);o={url:"http://contentfinancial2.appspot.com/info?codes="+i,refreshInterval:0,queryString:"select startTime, endTime, daysOfWeek, timeZoneOffset, updateInterval",callback:function(t,o){a=null,null!==t?(clearTimeout(o),e(i,t),n()):console.log("Error encountered loading collection times for: "+i)},params:r},a.getData(o)}function e(t,e){var n,o,s,a;if(null!==e){n=e.getNumberOfRows();for(var r=0;r<i.length;r++)if(i[r].instrument===t){a=e.getValue(0,3),o=e.getValue(0,0),s=e.getValue(0,1),i[r].collectionTimes={instrument:t,startTime:o.setTimezoneOffset(a),endTime:s.setTimezoneOffset(a),daysOfWeek:e.getFormattedValue(0,2).split(","),timeZoneOffset:a,isUpdated:!0};break}}}return{setIsUpdated:function(t,e){for(var n=0;n<i.length;n++)i[n].instrument===t&&null!==i[n].collectionTimes&&(i[n].collectionTimes.isUpdated=e)},addInstrument:function(e,n,o){for(var s=0,a=!1,r=!1;s<i.length;s++)if(i[s].instrument===e){null!==i[s].collectionTimes&&(Date.equals(Date.today(),n)||i[s].collectionTimes.isUpdated||(n=Date.today(),i[s].collectionTimes.startTime.addDays(1),i[s].collectionTimes.endTime.addDays(1),i[s].collectionTimes.isUpdated=!0),r=!0),a=!0;break}r?o(i[s].collectionTimes,n):(a||i.push({instrument:e,collectionTimes:null}),t(e,function(){o(i[s].collectionTimes,n)}))}}}var e=!1,i=[];return{getInstance:function(){return e||(e=t()),e}}}(),RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Financial=RiseVision.Common.Financial||{},RiseVision.Common.Financial.Helper={},RiseVision.Common.Financial.Helper=function(t){this.instruments=t},RiseVision.Common.Financial.Helper.prototype.setInstruments=function(t){this.instruments=t},RiseVision.Common.Financial.Helper.prototype.getInstruments=function(t,e){var i=this;if(t)return this.instruments.join("|");var n=(new Date).getDay(),o=e.length,s=[];return $.each(this.instruments,function(t,a){for(var r=0;o>r;r++)if(a===e[r].instrument){var l=e[r].startTime,c=e[r].endTime,u=e[r].daysOfWeek;$.each(u,function(e,o){return o==n?((new Date).between(l,c)&&s.push(i.instruments[t]),!1):void 0})}}),s.join("|")};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Financial=RiseVision.Common.Financial||{},RiseVision.Common.Financial.Historical={},RiseVision.Common.Financial.Historical.CollectionTimes={},RiseVision.Common.Financial.Historical=function(t,e,i){this.displayID=t?t:"preview",this.instrument=e,this.duration=i,this.isLoading=!0,this.updateInterval=6e4,this.now=Date.today(),this.url="https://contentfinancial2.appspot.com/data/historical?",this.historicalViz=new RiseVision.Common.Visualization,this.helper=new RiseVision.Common.Financial.Helper([this.instrument])},RiseVision.Common.Financial.Historical.prototype.setInstrument=function(t){this.isLoading=!0,this.instrument=t,this.helper.setInstruments([this.instrument])},RiseVision.Common.Financial.Historical.prototype.setDuration=function(t){this.duration=t},RiseVision.Common.Financial.Historical.prototype.setIsUpdated=function(t){CollectionTimes.getInstance().setIsUpdated(this.instrument,t)},RiseVision.Common.Financial.Historical.prototype.getHistoricalData=function(t,e,i){var n=this,o="select "+t.join()+" ORDER BY tradeTime",s="";i&&(i.sortOrder&&"desc"===i.sortOrder&&(o+=" desc"),i.limit&&(o+=" LIMIT "+i.limit)),CollectionTimes.getInstance().addInstrument(this.instrument,this.now,function(a,r){n.now=r,s=n.helper.getInstruments(n.isLoading,[a]),s?(i={url:n.url+"id="+n.displayID+"&code="+n.instrument+"&kind="+n.duration,refreshInterval:0,queryString:o,callback:function(t){n.onHistoricalDataLoaded(t,a,e)}},n.getHistoricalDataTimer=setTimeout(function(){n.getHistoricalData(t,e,i)},n.updateInterval),n.historicalViz.getData(i)):e(null)})},RiseVision.Common.Financial.Historical.prototype.onHistoricalDataLoaded=function(t,e,i){var n=0;null!==t?(clearTimeout(this.getHistoricalDataTimer),this.historicalData=t,n=t.getNumberOfRows(),this.isLoading=0===n||1===n&&"0"===t.getFormattedValue(0,0)?!0:!1,null!==this.historicalData?i({data:this.historicalData,collectionData:e}):i({collectionData:e})):(console.log("Error encountered loading historical data for: "),console.log(this))};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Financial=RiseVision.Common.Financial||{},RiseVision.Common.Financial.RealTime={},RiseVision.Common.Financial.RealTime=function(t,e,i){this.instruments=e,this.isLoading=!0,this.conditions={},this.collectionTimes=[],this.updateInterval=6e4,this.now=Date.today(),this.url="https://contentfinancial2.appspot.com/data?",this.logosURL="https://s3.amazonaws.com/risecontentlogos/financial/",this.viz=new RiseVision.Common.Visualization,this.helper=new RiseVision.Common.Financial.Helper(this.instruments),this._getDisplayId=function(){return t&&i.isAuthorized()?t:"preview"},this._saveCollectionTimes=function(){var t;if(t=this.data.getNumberOfRows(),1===this.instruments.length&&this.data.getNumberOfRows()>1)this._saveCollectionTime(0);else{for(var e=0;t>e;e++)this._saveCollectionTime(e);0===this.collectionTimes.length&&console.log(this.collectionTimes)}},this._saveCollectionTime=function(t){var e,i,n;"INVALID_SYMBOL"!==this.data.getValue(t,0)&&("..."===this.data.getValue(t,0)?this.isLoading=!0:(e=this.data.getValue(t,this.startTimeIndex+3),i=this.data.getValue(t,this.startTimeIndex),n=this.data.getValue(t,this.startTimeIndex+1),i&&n&&"N/P"!==e&&this.collectionTimes.push({instrument:this.instruments[t],startTime:i.setTimezoneOffset(e),endTime:n.setTimezoneOffset(e),daysOfWeek:this.data.getFormattedValue(t,this.startTimeIndex+2).split(",")})))}},RiseVision.Common.Financial.RealTime.prototype.setInstruments=function(t){t=t.split(","),$.each(t,function(e){t[e]=$.trim(t[e])}),this.isLoading=!0,this.collectionTimes=[],this.instruments=t,this.helper.setInstruments(this.instruments)},RiseVision.Common.Financial.RealTime.prototype.getData=function(t,e,i,n){var o=this,s=!1,a=0,r="select instrument",l="";if(this.dataFields={},this.dataFields.instrument=0,this.startTimeIndex=1,this.isLoading&&(this.callback=n),$.each(t,function(t,e){s=!1,"instrument"!==e&&($.each(o.dataFields,function(t){return t===e?(s=!0,!1):void 0}),s||(r+=", "+e,o.dataFields[e]=a+1,a++,o.startTimeIndex++))}),this.logoCount=0,r+=", startTime, endTime, daysOfWeek, timeZoneOffset",!Date.equals(Date.today(),this.now)){this.now=Date.today();for(var c=0;c<this.collectionTimes.length;c++)this.collectionTimes[c].startTime.addDays(1),this.collectionTimes[c].endTime.addDays(1)}if(l=this.helper.getInstruments(this.isLoading,this.collectionTimes)){var u={url:this.url+"id="+this._getDisplayId()+"&codes="+l,refreshInterval:0,queryString:r,callback:function(t){o.onRealTimeDataLoaded(t,e,i)}};this.getDataTimer=setTimeout(function(){o.getData(t,e,i,n)},this.updateInterval),this.viz.getData(u)}else n(null)},RiseVision.Common.Financial.RealTime.prototype.onRealTimeDataLoaded=function(t,e,i){null!==t?(clearTimeout(this.getDataTimer),this.data=t,this.isLoading?(this.isLoading=!1,0===this.collectionTimes.length&&this._saveCollectionTimes(),e?this.loadLogos():this.callback&&this.callback(this.data,this.logoURLs)):e&&i?this.loadLogos():this.callback&&this.callback(this.data,this.logoURLs)):(console.log("Error encountered loading real-time data for: "),console.log(this.instruments[0]))},RiseVision.Common.Financial.RealTime.prototype.loadLogos=function(){var t=this.data.getNumberOfRows();this.logoCount=0,this.urls=[],this.logoURLs=[];for(var e=0;t>e;e++)this.urls.push(this.logosURL+this.data.getFormattedValue(e,0)+".svg");this.loadLogo(this.urls.length)},RiseVision.Common.Financial.RealTime.prototype.loadLogo=function(t){var e,i=this;e=new Image,e.onload=function(){i.logoURLs.push(e.src),i.onLogoLoaded(t)},e.onerror=function(){i.logoURLs.push(null),i.onLogoLoaded(t)},e.src=this.urls[this.logoCount]},RiseVision.Common.Financial.RealTime.prototype.onLogoLoaded=function(t){this.logoCount++,t--,0===t?this.callback&&this.callback(this.data,this.logoURLs):this.loadLogo(t)},RiseVision.Common.Financial.RealTime.prototype.checkSigns=function(t){var e,i,n=0,o=0,s=[];for(n=0,o=this.data.getNumberOfRows();o>n;n++)e=this.data.getValue(n,this.dataFields[t]),isNaN(e)&&(e=e.replace(/[^0-9\.-]+/g,""),e=parseFloat(e)),isNaN(e)||(i=e>=0?1:-1,s.push(i));return s},RiseVision.Common.Financial.RealTime.prototype.compare=function(t){var e=this,i=0,n=0,o=0,s=0,a=[],r=!1;if(this.conditions[t])for(i=0,n=this.data.getNumberOfRows();n>i;i++)o=this.data.getValue(i,this.dataFields[t]),r=!1,$.each(this.conditions[t],function(t,n){return n.instrument===e.data.getValue(i,0)?(s=n.value,isNaN(o)&&(o=o.replace(/[^0-9\.-]+/g,""),o=parseFloat(o)),isNaN(s)&&(s=s.replace(/[^0-9\.-]+/g,""),s=parseFloat(s)),isNaN(o)||isNaN(s)||(o!=s?o>s?a.push(1):a.push(-1):a.push(0)),r=!0,!1):void 0}),r||a.push(0);return this.saveBeforeValues([t]),a},RiseVision.Common.Financial.RealTime.prototype.saveBeforeValues=function(t){var e=this;$.each(t,function(t,i){e.conditions[i]=[],e.saveBeforeValue(i,e.dataFields[i])})},RiseVision.Common.Financial.RealTime.prototype.saveBeforeValue=function(t,e){for(var i=0,n=this.data.getNumberOfRows();n>i;i++)this.conditions[t].push({instrument:this.data.getValue(i,0),value:this.data.getValue(i,e)})};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function t(t,e){var n=null;t.event?(n=t,n.file_url&&(n.file_format=i(n.file_url)),n.company_id=c,n.display_id=l,u&&(n.version=u),e(n)):e(n)}function e(){var t=new Date,e=t.getUTCFullYear(),i=t.getUTCMonth()+1,n=t.getUTCDate();return 10>i&&(i="0"+i),10>n&&(n="0"+n),""+e+i+n}function i(t){var e,i=/[?#&]/;return t&&"string"==typeof t?(e=t.substr(t.lastIndexOf(".")+1),i.test(e)&&(e=e.substr(0,-1!==e.indexOf("?")?e.indexOf("?"):e.length),e=e.substr(0,-1!==e.indexOf("#")?e.indexOf("#"):e.length),e=e.substr(0,-1!==e.indexOf("&")?e.indexOf("&"):e.length)),e.toLowerCase()):null}function n(t){var i={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:e(),rows:[{insertId:""}]},n=JSON.parse(JSON.stringify(i));return n.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),n.rows[0].json=JSON.parse(JSON.stringify(t)),n.rows[0].json.ts=(new Date).toISOString(),n}function o(e,i){t(i,function(t){null!==t&&RiseVision.Common.Logger.log(e,t)})}function s(t,i){try{top.postToPlayer({message:"widget-log",table:t,params:JSON.stringify(i),suffix:e()})}catch(n){console.log("widget-common.logEventToPlayer",n)}}function a(t,e){c=t,l=e}function r(t){u=t}var l="",c="",u=null;return{getInsertData:n,getFileFormat:i,logEvent:o,logEventToPlayer:s,setIds:a,setVersion:r}}(),RiseVision.Common.Logger=function(t){"use strict";function e(t){var e=new XMLHttpRequest;return new Date-c<358e4?t({}):(e.open("POST",o,!0),e.onloadend=function(){var i={};try{i=JSON.parse(e.response)}catch(n){console.warn("Can't refresh logger token - ",n.message)}t({token:i.access_token,refreshedAt:new Date})},e.send(),void 0)}function i(t){return a&&l===t}function n(n,o){function h(e){var i,a,r=new XMLHttpRequest;a=s.replace("TABLE_ID",n),c=e.refreshedAt||c,u=e.token||u,i=t.getInsertData(o),r.open("POST",a,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(r.onloadend=function(){o.cb(r.response)}),r.send(JSON.stringify(i))}if(!(!n||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&i(o.event))&&o.display_id&&"preview"!==o.display_id&&"display_id"!==o.display_id&&"displayId"!==o.display_id){try{if(top.postToPlayer&&top.enableWidgetLogging)return t.logEventToPlayer(n,o)}catch(f){console.log("widget-common: logger",f)}return a=!0,l=o.event,setTimeout(function(){a=!1},r),e(h)}}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",s="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",a=!1,r=1e3,l="",c=0,u="";return{log:n}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(t,e){"use strict";function i(){try{e.style.height=t.style.height}catch(i){console.warn("Can't initialize Message - ",i.message)}}function n(){if(s){for(;e.firstChild;)e.removeChild(e.firstChild);e.style.display="none",t.style.display="block",s=!1}}function o(i){var n,o=document.createDocumentFragment();s?(n=e.querySelector(".message"),n.innerHTML=i):(t.style.display="none",e.style.display="block",n=document.createElement("p"),n.innerHTML=i,n.setAttribute("class","message"),o.appendChild(n),e.appendChild(o),s=!0)}var s=!1;return i(),{hide:n,show:o}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function t(t){var e=new XMLHttpRequest,i=this;t&&"function"==typeof t&&(h?e.open("GET",l,!0):e.open("GET",l+"ping?callback=_",!0),e.onreadystatechange=function(){try{if(4===e.readyState)if(c=!0,200===e.status){u=!0;try{var n=e.responseText?JSON.parse(e.responseText):"";n&&(g=n.version)}catch(o){console.log(o)}t(!0,e.responseText)}else{if(404===e.status)return h=!0,l="https://localhost:9495/",i.ping(t);if(f)return h=!0,f=!1,l="http://localhost:9494/",i.ping(t);console.debug("Rise Cache is not running"),h=!1,u=!1,t(!1,null)}}catch(o){console.debug("Caught exception: ",o.description)}},e.send())}function e(t,e,i){function n(){var e,n,a;u?e=h?o(g,m)>0?l+"files?url="+t:l+"files?url="+encodeURIComponent(t):i?l+"?url="+encodeURIComponent(t):l+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(t):i?e=t:(n=t.split("?"),a=1===n.length?"?":"&",e=t+a+"cb="+(new Date).getTime()),s("HEAD",e)}function o(t,e){function i(t){return/^\d+$/.test(t)}function n(t){for(a=0;a<t.length;a++)if(!i(t[a]))return!1;return!0}var o=t.split("."),s=e.split("."),a=0;if(!n(o)||!n(s))return 0/0;for(a=0;a<o.length;++a){if(s.length===a)return 1;if(o[a]!==s[a])return o[a]>s[a]?1:-1}return o.length!==s.length?-1:0}function s(t,i){var n=new XMLHttpRequest,o={xhr:n,url:i};u?(n.open(t,i,!0),n.addEventListener("loadend",function(){var r=n.status||0;202===r?(a++,3>a?setTimeout(function(){s(t,i)},3e3):e(o,new Error("File is downloading"))):r>=200&&300>r?e(o):"HEAD"===t?s("GET",i):e(o,new Error("The request failed with status code: "+r))}),n.send()):e(o)}if(t&&e&&"function"==typeof e){var a=0;return c?n():this.ping(n)}}function i(t){var e="";switch(t){case 502:e="There was a problem retrieving the file.";break;case 504:e="Unable to download the file. The server is not responding.";break;case 507:e="There is not enough disk space to save the file on Rise Cache.";break;case 534:e="The file does not exist or cannot be accessed.";break;default:e=""}return e}function n(t){return t&&"function"==typeof t?c?(t(u),void 0):this.ping(function(){t(u)}):void 0}function o(t){return t&&"function"==typeof t?c?(t(h),void 0):this.ping(function(){t(h)}):void 0}function s(t){return t&&"function"==typeof t?this.isV2Running(function(e){e?t(e):t(a())}):void 0}function a(){var t=d.getDateObjectFromPlayerVersionString("2016.10.10.00.00"),e=d.getQueryParameter("sysInfo");if(!e){var i=d.getQueryParameter("parent");e=d.getQueryStringParameter("sysInfo",i)}if(e){var n=d.getQueryStringParameter("pv",e),o=d.getDateObjectFromPlayerVersionString(n);return o>=t}return!1}function r(){c=!1,u=!1,h=!1,f=!0,l="http://localhost:9494/"}var l="http://localhost:9494/",c=!1,u=!1,h=!1,f=!0,d=RiseVision.Common.Utilities,m="1.7.3",g="";return{getErrorMessage:i,getFile:e,isRiseCacheRunning:n,isV2Running:o,isRCV2Player:s,ping:t,reset:r}}();var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(t){"use strict";function e(){n(),l(),V>L&&i(),w.width=V,n(),l()
}function i(){var t=new Event("scroller-oversized-canvas");v.dispatchEvent(t)}function n(){V=0;for(var t=0;t<T.length;t++)T[t].separator?o(T[t]):s(T[t])}function o(t){var e=w.height/2,i=t.size/2;R.save(),R.fillStyle=t.color,R.beginPath(),R.arc(V+i,e,i,0,2*Math.PI),R.fill(),V+=t.size+10,R.restore()}function s(t){var e,i={};t&&(i.text=I.unescapeHTML(t.text),t.fontStyle&&(e=t.fontStyle,e.font&&e.font.family&&(i.font=e.font.family),e.size&&(i.size=e.size),e.forecolor&&(i.foreColor=e.forecolor),e.bold&&(i.bold=e.bold),e.italic&&(i.italic=e.italic)),a(i))}function a(t){var e="";R.save(),t.bold&&(e="bold "),t.italic&&(e+="italic "),t.size&&(e+=t.size+" "),t.font&&(e+=t.font),R.font=e,R.fillStyle=t.foreColor,R.textBaseline="middle",R.translate(0,w.height/2),R.fillText(t.text,V,0),V+=R.measureText(t.text).width+10,R.restore()}function r(){y.clearRect(0,0,v.width,v.height),y.drawImage(w,y.xpos,0)}function l(){var t=0,e=0;if(b=V,T.length>0)for(;t<v.width;)T[e].separator?o(T[e]):s(T[e]),t=V-b,e=e===T.length-1?0:e+1}function c(){var e;if(t.transition&&t.transition.speed)switch(t.transition.speed){case"slow":e=100;break;case"medium":e=150;break;case"fast":e=200;break;default:e=150}return b/e}function u(){C=null,y.xpos=0,v.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function h(){w=document.createElement("canvas"),w.id="secondary",w.style.display="none",R=f(w),document.body.appendChild(w)}function f(e){var i=e.getContext("2d");return e.width=t.width,e.height=t.height,i.xpos=0,i}function d(t){T=t,v=document.getElementById("scroller"),y=f(v),h(),e(),TweenLite.ticker.addEventListener("tick",r),v.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function m(t){T=t,e()}function g(){C||(C=TweenLite.to(y,c(),{xpos:-b,ease:Linear.easeNone,onComplete:u})),C.play()}function p(){C&&C.pause()}var v=null,y=null,w=null,R=null,C=null,T=[],V=0,b=0,I=RiseVision.Common.Utilities,L=32767;return{init:d,play:g,pause:p,refresh:m}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Store=RiseVision.Common.Store||{},RiseVision.Common.Store.Auth={},RiseVision.Common.Store.Auth=function(){function t(t){i=document.createElement("div"),i.className="overlay",document.body.appendChild(i),n=document.createElement("div"),n.className="auth-warning",n.innerHTML=t,n=document.body.appendChild(n)}function e(){i&&n&&(n.parentNode.removeChild(n),i.parentNode.removeChild(i))}var i,n,o=36e5;this.callback=null,this.authorized=!1,this.isAuthorized=function(){return this.authorized},this.checkForDisplay=function(t,e,i){this.callback=i,this.url=WIDGET_COMMON_CONFIG.STORE_URL+WIDGET_COMMON_CONFIG.AUTH_PATH_URL+"?id="+t+"&pc="+e,this.callApi()},this.checkForCompany=function(t,e,i){this.callback=i,this.url=WIDGET_COMMON_CONFIG.STORE_URL+WIDGET_COMMON_CONFIG.AUTH_PATH_URL+"?cid="+t+"&pc="+e,this.callApi()},this.callApi=function(){var t=this;$.ajax({dataType:"json",url:this.url,success:function(e,i){t.onSuccess(e,i)},error:function(){t.onError()}})},this.onSuccess=function(i){if(i&&i.authorized){this.authorized=!0,e();var n=new Date(i.expiry).getTime()-(new Date).getTime()-o;setTimeout(this.callApi,n)}else i&&!i.authorized?(this.authorized=!1,t("Product not authorized."),setTimeout(this.callApi,o)):setTimeout(this.callApi,o);this.callback&&this.callback(this.authorized)},this.onError=function(){this.authorized=!1,t("Cannot connect to Store for authorization."),setTimeout(this.callApi,o),this.callback&&this.callback(this.authorized)}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Visualization={},RiseVision.Common.Visualization=function(){this.query=null,this.isVisualizationLoaded=!1},RiseVision.Common.Visualization.prototype.getData=function(t){this.url=t.url,this.refreshInterval=t.refreshInterval,this.timeout=t.timeout||30,this.callback=t.callback,this.params=t.params,t.queryString&&(this.queryString=t.queryString),this.isVisualizationLoaded?this.sendQuery():this.loadVisualizationAPI()},RiseVision.Common.Visualization.prototype.loadVisualizationAPI=function(){var t=this;google.load("visualization","1",{callback:function(){t.isVisualizationLoaded=!0,t.sendQuery()}})},RiseVision.Common.Visualization.prototype.sendQuery=function(){var t=this;null!==this.query&&this.query.abort(),this.query=new google.visualization.Query(this.url),this.query.setRefreshInterval(this.refreshInterval),this.query.setTimeout(this.timeout),this.queryString&&this.query.setQuery(this.queryString),this.query.send(function(e){t.onQueryExecuted(e)})},RiseVision.Common.Visualization.prototype.onQueryExecuted=function(t){null===t?this.callback(t,this.params):t.isError()?(console.log("Message: "+t.getMessage()),console.log("Detailed message: "+t.getDetailedMessage()),console.log("Reasons: "+t.getReasons()),this.callback(null,this.params)):this.callback(t.getDataTable(),this.params)};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.WSClient=function(){function t(t){o(t)}function e(){try{if(top.RiseVision.Viewer.LocalMessaging)return top.RiseVision.Viewer.LocalMessaging.canConnect()}catch(t){console.log("widget-common: ws-client",t)}}function i(){o({topic:"client-list-request"})}function n(t){if(t&&"function"==typeof t)try{top.RiseVision.Viewer.LocalMessaging&&top.RiseVision.Viewer.LocalMessaging.receiveMessages(t)}catch(e){console.log("widget-common: ws-client",e)}}function o(t){try{top.RiseVision.Viewer.LocalMessaging&&top.RiseVision.Viewer.LocalMessaging.write(t)}catch(e){console.log("widget-common: ws-client",e)}}return{broadcastMessage:t,canConnect:e,getModuleClientList:i,receiveMessages:n}}();