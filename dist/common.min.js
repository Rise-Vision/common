var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,t){var n="font-family: "+decodeURIComponent(t.font.family).replace(/'/g,"")+"; ",o="color: "+(t.color?t.color:t.forecolor)+"; ",r="font-size: "+(-1===t.size.indexOf("px")?t.size+"px; ":t.size+"; "),i="font-weight: "+(t.bold?"bold":"normal")+"; ",a="font-style: "+(t.italic?"italic":"normal")+"; ",c="text-decoration: "+(t.underline?"underline":"none")+"; ",l="background-color: "+(t.highlightColor?t.highlightColor:t.backcolor)+";";return"."+e+" {"+n+o+r+i+a+c+l+"}"}function t(e){for(var t=document.createElement("style"),n=0,o=e.length;o>n;n++)t.appendChild(document.createTextNode(e[n]));document.head.appendChild(t)}function n(n,i){function a(){i&&"function"==typeof i&&i()}function c(){a()}var l=null,s=[],f=[],u=[];if(!n||0===n.length)return a(),void 0;n.forEach(function(n){n.class&&n.fontStyle&&t([e(n.class,n.fontStyle)])});for(var d=0;d<n.length;d++)n[d].fontStyle&&n[d].fontStyle.font.type&&"google"===n[d].fontStyle.font.type&&(l=n[d].fontStyle.font.family.split(",")[0],l=l.replace(/'/g,""),s.push(l));for(d=0;d<n.length;d++)n[d].fontStyle&&n[d].fontStyle.font.type&&"custom"===n[d].fontStyle.font.type&&(f.push(decodeURIComponent(n[d].fontStyle.font.family).replace(/'/g,"")),u.push(n[d].fontStyle.font.url.replace(/'/g,"\\'")));if(0===s.length&&0===f.length)a();else{for(var g=0;g<f.length;g+=1)o(f[g],u[g]);s.length>0?r(s,c):a()}}function o(e,t,n){var o=null,r="font-family: "+e+"; src: url('"+t+"');";n=n||document,o=n.styleSheets[0],null!==o&&o.addRule("@font-face",r)}function r(e,t){WebFont.load({google:{families:e},active:function(){t&&"function"==typeof t&&t()},inactive:function(){t&&"function"==typeof t&&t()},timeout:5e3})}function i(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t)}function a(e){for(var t=e.length,n=[],o=0;t>o;o++)n[o]=new Image,n[o].src=e[o]}function c(e){return l(e,window.location.href)}function l(e,t){e=e.replace(/[[]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=n.exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function s(e){var t=/(\d{4})\.(\d{2})\.(\d{2})\.(\d{2})\.(\d{2})/,n=t.exec(e);return n?new Date(+n[1],+n[2]-1,+n[3],+n[4],+n[5]):void 0}function f(){var e=c("parent"),t=c("type"),n=c("env"),o=c("viewerId"),r=t?t:e?l("type",e):"",i=n?n:e?l("env",e):"",a=o?o:e?l("viewerId",e):"";return{viewer_env:i,viewer_id:a,viewer_type:r}}function u(e){var t="";switch(e){case 404:t="The file does not exist or cannot be accessed.";break;case 507:t="There is not enough disk space to save the file on Rise Cache.";break;default:t="There was a problem retrieving the file from Rise Cache."}return t}function d(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent}function g(e,t){var n=new XMLHttpRequest;if(e&&t&&"function"==typeof t){n.open("HEAD",e+"?cb="+(new Date).getTime(),!1);try{n.send(),t(n.status>=200&&n.status<304)}catch(o){t(!1)}}}function p(){var e=25,t=navigator.userAgent.match(/Chrome\/(\S+)/),n=t?t[1]:0;return n&&(n=parseInt(n.substring(0,n.indexOf("."))),e>=n)?!0:!1}function h(e,t){return/^(?:f|ht)tps?\:\/\//.test(e)||(e=(t?"https://":"http://")+e),e}function m(){return C}function v(e,t){"serviceWorker"in navigator?navigator.serviceWorker.getRegistration("https://widgets.risevision.com/").then(function(n){n?e():t({error:"Not registered"})}):t({error:"Not supported"})}function y(){C=new Promise(v)}var C=new Promise(v);return{addProtocol:h,getQueryParameter:c,getQueryStringParameter:l,getFontCssStyle:e,addCSSRules:t,loadFonts:n,loadCustomFont:o,loadGoogleFonts:r,loadScript:i,preloadImages:a,getRiseCacheErrorMessage:u,unescapeHTML:d,hasInternetConnection:g,isLegacy:p,isServiceWorkerRegistered:m,getDateObjectFromPlayerVersionString:s,getViewerParams:f,_reset:y}}();