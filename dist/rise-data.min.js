var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseData=function(n,t){"use strict";function e(n,t){var e;return"string"==typeof t&&(e=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(t))?new Date(Date.UTC(+e[1],+e[2]-1,+e[3],+e[4],+e[5],+e[6])):t}function o(){return"session"===n.storageType}function i(){return"local"===n.storageType}function s(n,t){var s=null;if(i())try{s=JSON.parse(localStorage.getItem(n),e)}catch(a){console.warn(a)}else if(o())try{s=JSON.parse(sessionStorage.getItem(n),e)}catch(a){console.warn(a)}t(s)}function a(t,e){var o=J+"/"+n.endpoint;return("DELETE"===e||"GET"===e)&&(o+="/"+t),o}function c(n){var t=null;O&&"function"==typeof O&&(t=n?n.value:t,null!==t&&"object"==typeof t&&(t=JSON.stringify(t)),t=JSON.parse(t,e),O(t)),O=null}function r(){O&&"function"==typeof O&&s(h,O)}function u(n){$.getJSON(n).done(function(n){c(n)}).fail(function(){r()})}function f(n,t){$.ajax({type:"POST",url:n,contentType:"application/json",data:t,dataType:"json"}).done(function(n){c(n),N.push(T)})}function l(n,t){var e=a(n,"GET");T=n,O=t,h=n,u(e)}function p(n,t){var e=a(n,"POST"),o=JSON.stringify({key:n,value:t});T=n,f(e,o)}function y(){}function g(t,e){m&&t&&e&&"function"==typeof e&&(v?n.endpoint?l(t,e):s(t,e):s(t,e))}function d(n){n&&"function"==typeof n&&t.isRiseCacheRunning(function(t){v=t,m=!0,n()})}function S(t,e){if(m&&t&&e)if(v&&n.endpoint&&p(t,e),i())try{localStorage.setItem(t,JSON.stringify(e))}catch(s){console.warn(s)}else if(o())try{sessionStorage.setItem(t,JSON.stringify(e))}catch(s){console.warn(s)}}var m=!1,v=!1,T=null,O=null,h=null,J="https://localhost:9495",N=[];return{deleteItem:y,getItem:g,init:d,saveItem:S}};