var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseData=function(n,t){"use strict";function e(n,t){var e;return"string"==typeof t&&(e=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(t))?new Date(Date.UTC(+e[1],+e[2]-1,+e[3],+e[4],+e[5],+e[6])):t}function o(){return"session"===n.storageType}function i(){return"local"===n.storageType}function s(n,t){var s=null;if(i())try{s=JSON.parse(localStorage.getItem(n),e)}catch(c){console.warn(c)}else if(o())try{s=JSON.parse(sessionStorage.getItem(n),e)}catch(c){console.warn(c)}t(s)}function c(t,e){var o=N+"/"+n.endpoint;return("DELETE"===e||"GET"===e)&&(o+="/"+t),o}function f(n){h&&"function"==typeof h&&(null!==n&&"object"==typeof n&&(n=JSON.stringify(n)),n=JSON.parse(n,e),h(n)),h=null}function r(){h&&"function"==typeof h&&s(J,h)}function u(n){$.getJSON(n).done(function(n){f(n)}).fail(function(){r()})}function a(n,t){$.post(n,t).done(function(){f(),R.push(O)})}function l(n,t){var e=c(n,"GET");O=n,h=t,J=n,u(e)}function p(n,t){var e=c(n,"POST"),o=JSON.stringify({key:n,value:t});O=n,a(e,o)}function y(){}function g(t,e){S&&t&&e&&"function"==typeof e&&(v?n.endpoint?l(t,e):s(t,e):s(t,e))}function d(n){n&&"function"==typeof n&&t.isRiseCacheRunning(function(t){v=t,S=!0,n()})}function m(t,e){if(S&&t&&e)if(v&&n.endpoint&&p(t,e),i())try{localStorage.setItem(t,JSON.stringify(e))}catch(s){console.warn(s)}else if(o())try{sessionStorage.setItem(t,JSON.stringify(e))}catch(s){console.warn(s)}}var S=!1,v=!1,O=null,h=null,J=null,N="https://localhost:9495",R=[];return{deleteItem:y,getItem:g,init:d,saveItem:m}};