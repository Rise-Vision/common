var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseData=function(n,t){"use strict";function e(n,t){var e;return"string"==typeof t&&(e=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(t))?new Date(Date.UTC(+e[1],+e[2]-1,+e[3],+e[4],+e[5],+e[6])):t}function o(){return"session"===n.storageType}function i(){return"local"===n.storageType}function s(n,t){var s=null;if(i())try{s=JSON.parse(localStorage.getItem(n),e)}catch(c){console.warn(c)}else if(o())try{s=JSON.parse(sessionStorage.getItem(n),e)}catch(c){console.warn(c)}t(s)}function c(t,e){var o=J+"/"+n.endpoint;return("DELETE"===e||"GET"===e)&&(o+="/"+t),o}function a(n){v&&"function"==typeof v&&(null!==n&&"object"==typeof n&&(n=JSON.stringify(n)),n=JSON.parse(n,e),v(n)),v=null}function r(){v&&"function"==typeof v&&s(h,v)}function f(n){$.getJSON(n).done(function(n){a(n)}).fail(function(){r()})}function u(n,t){$.ajax({type:"POST",url:n,contentType:"application/json",data:t,dataType:"json"}).done(function(n){a(n),N.push(O)})}function l(n,t){var e=c(n,"GET");O=n,v=t,h=n,f(e)}function p(n,t){var e=c(n,"POST"),o=JSON.stringify({key:n,value:t});O=n,u(e,o)}function y(){}function g(t,e){m&&t&&e&&"function"==typeof e&&(T?n.endpoint?l(t,e):s(t,e):s(t,e))}function d(n){n&&"function"==typeof n&&t.isRiseCacheRunning(function(t){T=t,m=!0,n()})}function S(t,e){if(m&&t&&e)if(T&&n.endpoint&&p(t,e),i())try{localStorage.setItem(t,JSON.stringify(e))}catch(s){console.warn(s)}else if(o())try{sessionStorage.setItem(t,JSON.stringify(e))}catch(s){console.warn(s)}}var m=!1,T=!1,O=null,v=null,h=null,J="https://localhost:9495",N=[];return{deleteItem:y,getItem:g,init:d,saveItem:S}};