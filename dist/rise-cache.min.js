var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function n(n){var e=new XMLHttpRequest,t=this;n&&"function"==typeof n&&(c?e.open("GET",o,!0):e.open("GET",o+"ping?callback=_",!0),e.onreadystatechange=function(){try{if(4===e.readyState)if(s=!0,200===e.status)u=!0,n(!0,e.responseText);else{if(404===e.status)return c=!0,t.ping(n);console.debug("Rise Cache is not running"),u=!1,n(!1,null)}}catch(i){console.debug("Caught exception: ",i.description)}},e.send())}function e(n,e,t){function i(){var e,i,s;u?e=t?o+"?url="+encodeURIComponent(n):o+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(n):t?e=n:(i=n.split("?"),s=1===i.length?"?":"&",e=n+s+"cb="+(new Date).getTime()),c("HEAD",e)}function c(n,t){var i=new XMLHttpRequest,o={xhr:i,url:t};u?(i.open(n,t,!0),i.addEventListener("loadend",function(){var s=i.status||0;s>=200&&300>s?e(o):"HEAD"===n?c("GET",t):e(o,new Error("The request failed with status code: "+s))}),i.send()):e(o)}if(n&&e&&"function"==typeof e)return s?i():this.ping(i)}function t(n){return n&&"function"==typeof n?s?(n(u),void 0):this.ping(function(){n(u)}):void 0}function i(n){return n&&"function"==typeof n?s?(n(c),void 0):this.ping(function(){n(c)}):void 0}var o="//localhost:9494/",s=!1,u=!1,c=!1;return{getFile:e,isRiseCacheRunning:t,isV2Running:i,ping:n}}();